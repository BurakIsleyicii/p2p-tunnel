(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ce160bc"],{"17c3":function(e,t,o){},"566f":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=o("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-7310124f"),e=e(),Object(n["popScopeId"])(),e},c={class:"forward-wrap"},a={class:"title t-c"},l={class:"head flex"},u=Object(n["createTextVNode"])("增加长连接端口"),i=Object(n["createTextVNode"])("刷新列表"),d=r((function(){return Object(n["createElementVNode"])("span",{class:"flex-1"},null,-1)})),f=Object(n["createTextVNode"])("删除"),s=Object(n["createTextVNode"])("增加转发");function b(e,t,o,r,b,p){var m=Object(n["resolveComponent"])("el-button"),O=Object(n["resolveComponent"])("el-table-column"),j=Object(n["resolveComponent"])("el-switch"),v=Object(n["resolveComponent"])("el-popconfirm"),w=Object(n["resolveComponent"])("el-table"),h=Object(n["resolveComponent"])("el-alert"),V=Object(n["resolveComponent"])("AddForward"),T=Object(n["resolveComponent"])("AddListen"),g=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("h3",a,Object(n["toDisplayString"])(e.$route.meta.name),1),Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(m,{type:"primary",size:"small",onClick:r.handleAddListen},{default:Object(n["withCtx"])((function(){return[u]})),_:1},8,["onClick"]),Object(n["createVNode"])(m,{size:"small",onClick:r.loadPorts},{default:Object(n["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),d]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(w,{data:r.state.list,border:"",size:"small",onExpandChange:r.onExpand,"row-key":"ServerPort","expand-row-keys":r.expandKeys},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{type:"expand"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(w,{data:e.row.Forwards,border:"",size:"small"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{prop:"sourceText",label:"服务端地址"}),Object(n["createVNode"])(O,{prop:"distText",label:"本地地址"}),Object(n["createVNode"])(O,{prop:"Desc",label:"说明"}),Object(n["createVNode"])(O,{prop:"tunnelTypeText",label:"通信通道",width:"80"}),Object(n["createVNode"])(O,{prop:"Listening",label:"注册状态",width:"85"},{default:Object(n["withCtx"])((function(o){return[Object(n["createVNode"])(j,{onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){}),["stop"])),onChange:function(t){return r.onListeningChange(e.row,o.row)},modelValue:o.row.Listening,"onUpdate:modelValue":function(e){return o.row.Listening=e}},null,8,["onChange","modelValue","onUpdate:modelValue"])]})),_:2},1024),Object(n["createVNode"])(O,{prop:"todo",label:"操作",width:"70",fixed:"right",class:"t-c"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(v,{title:"删除不可逆，是否确认",onConfirm:function(o){return r.handleRemoveListen(e.row,t.row)}},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"danger",size:"small"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:2},1024)]})),_:2},1032,["data"])]})),_:1}),Object(n["createVNode"])(O,{prop:"ServerPort",label:"服务器端口"}),Object(n["createVNode"])(O,{prop:"AliveType",label:"连接类型",width:"85"},{default:Object(n["withCtx"])((function(e){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(r.shareData.aliveTypes[e.row.AliveType]),1)]})),_:1}),Object(n["createVNode"])(O,{prop:"todo",label:"操作",width:"90",fixed:"right",class:"t-c"},{default:Object(n["withCtx"])((function(e){return[2==e.row.AliveType?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,type:"info",size:"small",onClick:function(t){return r.handleAddForward(e.row)}},{default:Object(n["withCtx"])((function(){return[s]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data","onExpandChange","expand-row-keys"])),[[g,r.state.loading]]),Object(n["createVNode"])(h,{class:"alert",type:"warning","show-icon":"",closable:!1,title:"服务器代理转发",description:"短链接端口是由服务器配置好的，不能自由新增，使用多个转发即可实现访问不同服务。长连接一个端口对应一个服务，只要服务器设定的端口范围未满，即可使用"}),r.state.showAddForward?(Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:0,modelValue:r.state.showAddForward,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.state.showAddForward=e}),onSuccess:r.loadPorts},null,8,["modelValue","onSuccess"])):Object(n["createCommentVNode"])("",!0),r.state.showAddListen?(Object(n["openBlock"])(),Object(n["createBlock"])(T,{key:1,modelValue:r.state.showAddListen,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.state.showAddListen=e}),onSuccess:r.loadPorts},null,8,["modelValue","onSuccess"])):Object(n["createCommentVNode"])("",!0)])}o("d81d"),o("99af"),o("a434"),o("4de4"),o("d3b7");var p=o("a1e9"),m=o("5c40"),O=o("f8aa"),j=o("8286"),v=o("9709"),w=o("3ef4"),h=["innerHTML"],V=Object(n["createTextVNode"])("取 消"),T=Object(n["createTextVNode"])("确 定");function g(e,t,o,r,c,a){var l=Object(n["resolveComponent"])("el-input"),u=Object(n["resolveComponent"])("el-form-item"),i=Object(n["resolveComponent"])("el-option"),d=Object(n["resolveComponent"])("el-select"),f=Object(n["resolveComponent"])("el-form"),s=Object(n["resolveComponent"])("el-button"),b=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{title:"添加短连接转发","destroy-on-close":"",modelValue:e.show,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.show=t}),center:"","close-on-click-modal":!1,width:"350px"},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{onClick:r.handleCancel},{default:Object(n["withCtx"])((function(){return[V]})),_:1},8,["onClick"]),Object(n["createVNode"])(s,{type:"primary",loading:e.loading,onClick:r.handleSubmit},{default:Object(n["withCtx"])((function(){return[T]})),_:1},8,["loading","onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{ref:"formDom",model:e.form,rules:e.rules,"label-width":"100px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{label:"服务器地址",prop:"Domain"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.Domain,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.Domain=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"本机ip",prop:"LocalIp"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.LocalIp,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.LocalIp=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"本机端口",prop:"LocalPort"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.LocalPort,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.LocalPort=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"通信通道",prop:"TunnelType"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{modelValue:e.form.TunnelType,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.TunnelType=t}),placeholder:"选择通信通道"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.shareData.tunnelTypes,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"简单说明",prop:"Desc"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.Desc,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.Desc=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),Object(n["createElementVNode"])("div",{class:"remark t-c",innerHTML:r.remark},null,8,h)]})),_:1},8,["modelValue"])}var C=o("5530"),y=(o("a9e3"),o("a15b"),o("e9c4"),o("6ff2")),L={props:["modelValue"],emits:["update:modelValue","success"],setup:function(e,t){var o=t.emit,n=Object(v["a"])(),r=Object(m["W"])("add-forward-data"),c=Object(j["a"])(),a=Object(p["p"])({show:e.modelValue,loading:!1,form:{AliveType:r.value.AliveType,ServerPort:r.value.ServerPort,Domain:n.ServerConfig.Ip,Desc:"",LocalIp:"",LocalPort:0,TunnelType:"2"},rules:{Domain:[{required:!0,message:"必填",trigger:"blur"}],LocalIp:[{required:!0,message:"必填",trigger:"blur"}],LocalPort:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:1,max:65535,message:"数字 1-65535",trigger:"blur",transform:function(e){return Number(e)}}]}});Object(m["nc"])((function(){return a.show}),(function(e){e||setTimeout((function(){o("update:modelValue",e)}),300)}));var l=Object(p["c"])((function(){return["服务器(".concat(a.form.Domain,":").concat(a.form.ServerPort,")")," -> ","本机(".concat(a.form.LocalIp,":").concat(a.form.LocalPort,")")].join("")})),u=Object(p["r"])(null),i=function(){u.value.validate((function(e){if(!e)return!1;a.loading=!0;var t=JSON.parse(JSON.stringify(a.form));t.AliveType=Number(t.AliveType),t.LocalPort=Number(t.LocalPort),t.TunnelType=Number(t.TunnelType),Object(O["a"])(t).then((function(e){a.loading=!1,e?y["ElMessage"].error(e):(a.show=!1,o("success"))})).catch((function(e){a.loading=!1}))}))},d=function(){a.show=!1};return Object(C["a"])(Object(C["a"])({shareData:c},Object(p["z"])(a)),{},{formDom:u,remark:l,handleSubmit:i,handleCancel:d})}},N=(o("f13a"),o("6b0d")),x=o.n(N);const P=x()(L,[["render",g],["__scopeId","data-v-01b2c0da"]]);var k=P,S=["innerHTML"],D=Object(n["createTextVNode"])("取 消"),A=Object(n["createTextVNode"])("确 定");function I(e,t,o,r,c,a){var l=Object(n["resolveComponent"])("el-input"),u=Object(n["resolveComponent"])("el-form-item"),i=Object(n["resolveComponent"])("el-option"),d=Object(n["resolveComponent"])("el-select"),f=Object(n["resolveComponent"])("el-form"),s=Object(n["resolveComponent"])("el-button"),b=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{title:"添加长连接","destroy-on-close":"",modelValue:e.show,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.show=t}),center:"","close-on-click-modal":!1,width:"350px"},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{onClick:r.handleCancel},{default:Object(n["withCtx"])((function(){return[D]})),_:1},8,["onClick"]),Object(n["createVNode"])(s,{type:"primary",loading:e.loading,onClick:r.handleSubmit},{default:Object(n["withCtx"])((function(){return[A]})),_:1},8,["loading","onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{ref:"formDom",model:e.form,rules:e.rules,"label-width":"100px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{label:"服务器端口",prop:"ServerPort"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.ServerPort,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.ServerPort=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"本机ip",prop:"LocalIp"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.LocalIp,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.LocalIp=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"本机端口",prop:"LocalPort"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.LocalPort,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.LocalPort=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"通信通道",prop:"TunnelType"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{modelValue:e.form.TunnelType,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.TunnelType=t}),placeholder:"选择通信通道"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.shareData.tunnelTypes,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{label:"简单说明",prop:"Desc"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.form.Desc,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.Desc=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),Object(n["createElementVNode"])("div",{class:"remark t-c",innerHTML:r.remark},null,8,S)]})),_:1},8,["modelValue"])}var _={props:["modelValue"],emits:["update:modelValue","success"],setup:function(e,t){var o=t.emit,n=Object(v["a"])(),r=Object(m["W"])("add-listen-data"),c=Object(j["a"])(),a=Object(p["p"])({show:e.modelValue,loading:!1,form:{AliveType:r.value.AliveType,ServerPort:0,Domain:n.ServerConfig.Ip,Desc:"",LocalIp:"",LocalPort:0,TunnelType:"2"},rules:{Domain:[{required:!0,message:"必填",trigger:"blur"}],LocalIp:[{required:!0,message:"必填",trigger:"blur"}],ServerPort:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:1,max:65535,message:"数字 1-65535",trigger:"blur",transform:function(e){return Number(e)}}],LocalPort:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:1,max:65535,message:"数字 1-65535",trigger:"blur",transform:function(e){return Number(e)}}]}});Object(m["nc"])((function(){return a.show}),(function(e){e||setTimeout((function(){o("update:modelValue",e)}),300)}));var l=Object(p["c"])((function(){return["服务器(".concat(n.ServerConfig.Ip,":").concat(a.form.ServerPort,")")," -> ","本机(".concat(a.form.LocalIp,":").concat(a.form.LocalPort,")")].join("")})),u=Object(p["r"])(null),i=function(){u.value.validate((function(e){if(!e)return!1;a.loading=!0;var t=JSON.parse(JSON.stringify(a.form));t.ServerPort=Number(t.ServerPort),t.AliveType=Number(t.AliveType),t.LocalPort=Number(t.LocalPort),t.TunnelType=Number(t.TunnelType),Object(O["a"])(t).then((function(e){a.loading=!1,e?y["ElMessage"].error(e):(a.show=!1,o("success"))})).catch((function(e){a.loading=!1}))}))},d=function(){a.show=!1};return Object(C["a"])(Object(C["a"])({shareData:c},Object(p["z"])(a)),{},{formDom:u,remark:l,handleSubmit:i,handleCancel:d})}};o("5d27");const F=x()(_,[["render",I],["__scopeId","data-v-a96bf014"]]);var B=F,U={components:{AddForward:k,AddListen:B},setup:function(){var e=Object(j["a"])(),t=Object(v["a"])(),o=Object(p["p"])({loading:!1,list:[],showAddForward:!1,showAddListen:!1}),n=Object(p["r"])([]),r=function(e,t){n.value=t.map((function(e){return e.ServerPort}))},c=function(){Object(O["h"])().then((function(e){a(e)}))},a=function(n){Object(O["g"])().then((function(r){o.list=n.splice(0,n.length-2).map((function(t){return{ServerPort:t,AliveType:2,Forwards:r.filter((function(e){return 2==e.AliveType&&e.ServerPort==t})).map((function(t){return{Domain:t.Domain,Listening:t.Listening,Desc:t.Desc,LocalIp:t.LocalIp,LocalPort:t.LocalPort,TunnelType:t.TunnelType,sourceText:"".concat(t.Domain,":").concat(t.ServerPort),distText:"".concat(t.LocalIp,":").concat(t.LocalPort),tunnelTypeText:e.tunnelTypes[t.TunnelType]}}))}})).concat(r.filter((function(e){return 1==e.AliveType})).map((function(o){return{ServerPort:o.ServerPort,Desc:o.Desc,AliveType:1,Forwards:[{Domain:o.Domain,Listening:o.Listening,Desc:o.Desc,LocalIp:o.LocalIp,LocalPort:o.LocalPort,TunnelType:o.TunnelType,sourceText:"".concat(t.ServerConfig.Ip,":").concat(o.ServerPort),distText:"".concat(o.LocalIp,":").concat(o.LocalPort),tunnelTypeText:e.tunnelTypes[o.TunnelType]}]}})))}))},l=function(e,t){var n=t.Listening?O["m"]:O["o"];o.loading=!0,n({AliveType:e.AliveType,Domain:t.Domain,ServerPort:e.ServerPort,LocalIp:t.LocalIp,LocalPort:t.LocalPort,TunnelType:t.TunnelType}).then((function(e){o.loading=!1,e?w["a"].error(e):c()})).catch((function(){o.loading=!1}))},u=function(e,t){o.loading=!0,Object(O["k"])({AliveType:e.AliveType,Domain:t.Domain,ServerPort:e.ServerPort,LocalIp:t.LocalIp,LocalPort:t.LocalPort,TunnelType:t.TunnelType}).then((function(e){o.loading=!1,e?w["a"].error(e):c()})).catch((function(){o.loading=!1}))},i=Object(p["r"])({AliveType:2,ServerPort:0});Object(m["Ab"])("add-forward-data",i);var d=function(e){i.value.ServerPort=e.ServerPort,o.showAddForward=!0},f=Object(p["r"])({AliveType:1});Object(m["Ab"])("add-listen-data",f);var s=function(){o.showAddListen=!0};return Object(m["rb"])((function(){c()})),{state:o,shareData:e,loadPorts:c,onExpand:r,expandKeys:n,handleRemoveListen:u,handleAddForward:d,handleAddListen:s,onListeningChange:l}}};o("6c7f");const E=x()(U,[["render",b],["__scopeId","data-v-7310124f"]]);t["default"]=E},"5d27":function(e,t,o){"use strict";o("6cc7")},"6c7f":function(e,t,o){"use strict";o("17c3")},"6cc7":function(e,t,o){},a91d:function(e,t,o){},f13a:function(e,t,o){"use strict";o("a91d")},f8aa:function(e,t,o){"use strict";o.d(t,"d",(function(){return r})),o.d(t,"e",(function(){return c})),o.d(t,"f",(function(){return a})),o.d(t,"l",(function(){return l})),o.d(t,"n",(function(){return u})),o.d(t,"c",(function(){return i})),o.d(t,"j",(function(){return d})),o.d(t,"b",(function(){return f})),o.d(t,"i",(function(){return s})),o.d(t,"h",(function(){return b})),o.d(t,"g",(function(){return p})),o.d(t,"a",(function(){return m})),o.d(t,"m",(function(){return O})),o.d(t,"o",(function(){return j})),o.d(t,"k",(function(){return v}));o("e9c4");var n=o("97af"),r=function(){return Object(n["c"])("tcpforward/list")},c=function(){return Object(n["c"])("tcpforward/listproxy")},a=function(){return Object(n["c"])("tcpforward/GetPac")},l=function(e){return Object(n["c"])("tcpforward/start",{ID:e})},u=function(e){return Object(n["c"])("tcpforward/stop",{ID:e})},i=function(e){return Object(n["c"])("tcpforward/AddListen",{ID:e.ID,Content:JSON.stringify(e)})},d=function(e){return Object(n["c"])("tcpforward/RemoveListen",{ID:e})},f=function(e){return Object(n["c"])("tcpforward/AddForward",{ID:e.Forward.ID,Content:JSON.stringify(e)})},s=function(e,t){return Object(n["c"])("tcpforward/RemoveForward",{ID:t,Content:JSON.stringify({ListenID:e,ForwardID:t})})},b=function(){return Object(n["c"])("tcpforward/ServerPorts")},p=function(){return Object(n["c"])("tcpforward/ServerForwards")},m=function(e){return Object(n["c"])("tcpforward/AddServerForward",e)},O=function(e){return Object(n["c"])("tcpforward/StartServerForward",e)},j=function(e){return Object(n["c"])("tcpforward/StopServerForward",e)},v=function(e){return Object(n["c"])("tcpforward/RemoveServerForward",e)}}}]);